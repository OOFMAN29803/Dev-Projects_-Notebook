<!DOCTYPE HTML>
<html>
<head>
<title>Docs Lite</title>
<link rel="stylesheet" type="text/css" href="stylepid.css">
</head>
<body> 

<input class="input" placeholder="Add the title here..." id="input" maxlength=25></input><p class="output" id="output"></p>
<center><div class="divtop"><p class="fontp"></p><input maxlength="3" class="size" id="sizeinput"></input><input class="font" id="fontinput" placeholder="Font..."></input><input class="color" id="colorinput" placeholder="Color..."><button class="downloadbutton" onclick="downloadtxt()">Download</button></input><button class="button2" id="boldbutton" onclick="normal()">Bold Font</button><button class="button3" id="alignbutton" onclick="alignleft()">Right Align</button><button class="button2" id="underline" onclick="notunderline()">Underline</button><button class="button2" onclick="newpage()" id="addpage">+</button><button onclick="tts()">Text to Speech</button><button  onclick="importTxtFile()">import .txt file</button><div class="pagediv"><p id="page" class="page">Pages: 1</p></div></div>
<textarea class="mainarea" id="textarea"></textarea>
<script>
var time = 60000000
var page = 1
var underline = 1
function size() {
var sizetext = document.getElementById("textarea")
var sizeinput = document.getElementById("sizeinput").value
sizetext.style.fontSize = sizeinput + "px"
}
setInterval(size, 10)

function name() {
var input = document.getElementById("input").value;
var output = document.getElementById("output");
output.textContent = input;
var namefile = output.textContent
}
setInterval(name, 10)

function color() {
var colortext = document.getElementById("textarea")
var colorinput = document.getElementById("colorinput").value
colortext.style.color = colorinput
}

setInterval(color, 10)

function font() {
var fonttext = document.getElementById("textarea")
var fontinput = document.getElementById("fontinput").value
fonttext.style.fontFamily = fontinput
}

setInterval(font, 10)


const handleCtrl1 = (e) => {
  if (e.ctrlKey && e.keyCode === 49) { // The `Ctrl`+`1` key code is 49
    downloadtxt();
  }
};

document.addEventListener('keydown', handleCtrl1);

function bold() {
var textarea = document.getElementById("textarea")
textarea.style.fontWeight = "bold"
}

function normal() {
var textarea = document.getElementById("textarea")
var boldbutton = document.getElementById("boldbutton")
if (textarea.style.fontWeight === "bold") {
 
textarea.style.fontWeight = "400"
boldbutton.textContent = "Bold Font"
} else {
textarea.style.fontWeight = "bold"
boldbutton.textContent = "Normal Font"
}
}

function notunderline() {
var underlinebutton = document.getElementById("underline")  
var textarea = document.getElementById("textarea");
if (textarea.style.textDecoration === "underline") {
 
 textarea.style.textDecoration = "none";
underlinebutton.textContent = "Underline"
} else {
  textarea.style.textDecoration = "underline";
underlinebutton.textContent = "No Underline"
}
}

function alignleft() {
var textarea = document.getElementById("textarea");
if (textarea.style.textAlign === "left") {
textarea.style.textAlign = "right"
alignbutton.textContent = "Center Align"
} else if (textarea.style.textAlign === "right") {
textarea.style.textAlign = "center"
alignbutton.textContent = "Left Align"
} else {
textarea.style.textAlign = "left"
alignbutton.textContent = "Right Align"
}
}

function aligncenter() {
var textarea = document.getElementById("textarea")
textarea.style.textAlign = "center"
}

function alignright() {
var textarea = document.getElementById("textarea")
textarea.style.textAlign = "right"
}

function newpage()  {
page = page + 1
var ppage = document.getElementById("page")
ppage.textContent = "Pages: " + page
const newpage = document.createElement("textarea");
const center = document.createElement("center")
newpage.id = "textarea"
document.body.appendChild(center)
center.appendChild(newpage)
}
function save() {
  var autobutton = document.getElementById("savebutton");
  autobutton.disabled = true;
  var time = "30000"; 
  downloadtxt();
}

function downloadtxt() {
const textareas = document.querySelectorAll('textarea');
    const textValues = [];
    textareas.forEach(textarea => {
        textValues.push(textarea.value);
    });
    const htmlContent = textValues.join('\n');
    const blob = new Blob([htmlContent], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = document.getElementById("input").value + '.txt';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
} 

function tts() {
  const textareas = document.querySelectorAll("textarea");
  let textToSpeak = '';
  textareas.forEach((textarea) => {
    textToSpeak += textarea.value + '\n'; 
  });
  const speechSynthesis = window.speechSynthesis;
  const utterance = new SpeechSynthesisUtterance(textToSpeak);
  const voices = speechSynthesis.getVoices();
  utterance.voice = voices[3];
  utterance.rate = 0.7;
  speechSynthesis.speak(utterance);
}

async function importTxtFile() {
      const file = await new Promise((resolve, reject) => {
        const input = document.createElement('input');
        const textarea = document.getElementById("textarea")
        input.type = 'file';
        input.accept = '.txt';
        input.onchange = () => resolve(input.files[0]);
input.style.display = "none"        
document.body.appendChild(input);
        input.click();
      });

      const content = await file.text();
      textarea.textContent = content;
}
window.addEventListener('beforeunload', function() {
  downloadtxt();
});

</script>
</body>
</html>